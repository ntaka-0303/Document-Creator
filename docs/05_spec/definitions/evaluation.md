<!--
FILE_NAME: evaluation.md
DOC_TYPE: spec
DESCRIPTION: 機能仕様書(document type: spec)のAI自動評価指標
PURPOSE: doc-evaluator がドラフトを評価するための標準基準
-->

# 評価指標（spec）

本ファイルは「機能仕様書（spec）」に対する評価基準である。  
評価は以下 4 領域（A〜D）・合計 100 点で実施する。

---

## A. 表層品質・構成（Surface & Structure）25点

### A-1. テンプレ準拠度（5点）
- `template.md` に定義された章立て（背景・目的、適用範囲、機能一覧、機能仕様、画面仕様、IF仕様、データモデル、非機能 等）が過度に崩れていない  
- 重要な章が抜けていない  

### A-2. 文章の明瞭性（5点）
- 文が冗長すぎず、箇条書き・表を適切に使っている  
- 専門用語が必要に応じて説明されている  

### A-3. 一貫性（5点）
- 用語・略語・機能ID・画面ID・API名などが全体で統一されている  
- 同じ仕様に関する記述が、章をまたいで矛盾していない  

### A-4. 論理的な構成（5点）
- 章の流れが自然で、読者が迷子にならない  
- 各章・各節の役割が明確である  

### A-5. フォーマット・体裁（5点）
- 見出しレベル、リスト、表など Markdown の構造が適切  
- 誤字脱字が限定的で、理解を妨げない  

---

## B. 正確性・網羅性（Correctness & Completeness）25点

### B-1. 正確性（5点）
- 要件定義書や To-Be 業務フローで定義された内容を正しく反映している  
- 推測や憶測で重要な要件を勝手に追加していない  

### B-2. 網羅性（5点）
- 上位ドキュメント（要件定義書／To-Be フロー／入力資料）に記載された要件・制約が、いずれかの章で必ず触れられている  

### B-3. 条件・例外の記述（5点）
- 主要な条件分岐・例外ケース・エラー時の挙動が十分に記載されている  

### B-4. データ／IF の整合性（5点）
- データ項目・型・制約、API／ファイル連携仕様が、一貫性のある形で定義されている  

### B-5. 上位成果物とのトレーサビリティ（5点）
- 重要な業務要件・ユースケースに対して、どの章・どの機能仕様で実現しているかが追える（IDや名称の対応など）  

---

## C. 実装・テスト観点からの妥当性（Implementability）25点

### C-1. 機能仕様の具体性（5点）
- 開発担当者が実装イメージを持てるレベルの具体性（入力／処理／出力）がある  

### C-2. 画面・UI仕様の明確さ（5点）
- 画面項目、バリデーション、ボタン動作などが明確に定義されている  

### C-3. 非機能仕様の具体性（5点）
- 性能・可用性・セキュリティ・運用など非機能要求が、テスト可能な形で記述されている  

### C-4. テスト観点の導きやすさ（5点）
- 本仕様書から、シナリオテスト／受入テストの観点が自然に導ける  

### C-5. AIWorkforce 特有の仕様の明示（5点）
- エージェント／ワークフローの呼び出しポイント、再実行・フィードバック反映のルールなど、AI特有の仕様が整理されている  

---

## D. セキュリティ・運用・ガバナンス（Risk & Operations）25点

### D-1. セキュリティ仕様（5点）
- 認証・認可、暗号化、ネットワーク制御、テナント分離などが仕様として定義されている  

### D-2. ログ・監査・トレーサビリティ（5点）
- どの操作・イベントをログに残すか、ログ項目・保持期間が整理されている  

### D-3. エラー処理・メッセージ方針（5点）
- エラー種別、ユーザー向けメッセージ／運用者向けメッセージの方針が定義されている  

### D-4. 運用・保守とのインターフェース（5点）
- 運用手順・SOP と連携すべきポイントが仕様として意識されている  

### D-5. リスク・未確定事項の整理（5点）
- 仕様上のリスク・検討中事項が明示されており、開発・テストに影響するポイントが共有されている  

---

# スコアリング方法

各項目を 1〜5 点で採点し、以下の形式で返す：

- A（25点満点）
- B（25点満点）
- C（25点満点）
- D（25点満点）
- Total（合計100点）

---

# pass / fail 基準

- **90点以上：pass（実装に移せる十分な水準）**  
- **75〜89点：条件付き pass（改善推奨）**  
- **74点以下：fail（重要な改善が必要）**

---

# 出力形式（doc-evaluator による回答フォーマット）

評価エージェントは以下の JSON 形式で回答する：

```
{
  "scores": {
    "A_surface":       { "score": X, "details": {...} },
    "B_correctness":   { "score": X, "details": {...} },
    "C_implementable": { "score": X, "details": {...} },
    "D_risk":          { "score": X, "details": {...} },
    "total": X,
    "pass_fail": "pass" | "fail"
  },
  "feedback": {
    "strengths": ["..."],
    "improvements": ["..."],
    "recommendations": ["..."]
  }
}
```

---

# 評価対象ファイル

- 対象：`@docs/05_spec/output/*.md`（機能仕様書ドラフト）  
- 基準：本 `evaluation.md`

---
