<!--
FILE_NAME: evaluation.md
DOC_TYPE: to-be_workflow
DESCRIPTION: To-Be業務フロー(document type: to-be_workflow)のAI自動評価指標
PURPOSE: doc-evaluator がドラフトを評価するための標準基準
-->

# 評価指標（to-be_workflow）

本ファイルは「To-Be 業務フロー定義書（to-be_workflow）」に対する評価基準である。  
評価は以下 4 領域（A〜D）・合計 100 点で実施する。

---

## A. 図の構造・可読性（Diagram Quality）25点

### A-1. Mermaid 構文の正しさ（5点）
- Mermaid フローチャート構文（コードブロック、`flowchart` 宣言、`subgraph`、`style` 等）が正しく記述されており、レンダリングに問題がない  
- [Mermaid Flowchart](https://mermaid.js.org/syntax/flowchart.html) の基本的なルールに反していない  

### A-2. フローの視認性・流れの分かりやすさ（5点）
- 開始〜終了の流れが一方向にたどりやすく、戻りループなども過度に複雑になっていない  
- 矢印・ラベル・ノードの配置が、読者にとって直感的である  

### A-3. 部署（スイムレーン）表現の明確さ（5点）
- `subgraph` などを用いて、部署・役割ごとのスイムレーンが明確に表現されている  
- 部署ごとの境界線・色分けなどにより、ハンドオフが視覚的に把握できる  

### A-4. ノード・ラベルの命名（5点）
- ノード名・ラベルが意味を持ち、業務担当者が読んで理解しやすい  
- ノードID（例: `D1_S1`）と表示テキストが適切に対応している  

### A-5. テンプレ準拠度（5点）
- テンプレートに定義された構成（As-Is 概要、To-Be 全体図、部署別詳細、ルール・例外 等）を大きく逸脱していない  

---

## B. 改善効果・業務妥当性（Business Effectiveness）25点

### B-1. 改善効果の明確性（5点）
- As-Is との違い・改善ポイントが To-Be 図や文章から明確に読み取れる  
- リードタイム・工数・エラーリスクなど、どの観点で改善されるかが示されている  

### B-2. 課題解決度（5点）
- 提案書・計画書で挙げられた課題に対して、To-Be フローが具体的な解決策になっている  

### B-3. 実現可能性（5点）
- 現実的に実装・運用可能なワークフローになっており、過度な自動化や非現実的な前提に依存していない  

### B-4. AIWorkforce 活用の適切さ（5点）
- AIWorkforce のワークフロー／エージェントが、業務にとって適切な箇所・粒度で組み込まれている  

### B-5. 関係者への価値（5点）
- 営業、バックオフィス、DX推進部、情シスなど主要ステークホルダーにとっての価値が担保されている  

---

## C. 一貫性・トレーサビリティ（Consistency & Traceability）25点

### C-1. 他ドキュメントとの整合性（5点）
- 提案書（proposal）・計画書（plan）・要件定義書（requirement）と整合している  
- To-Be フローが、それらで定義されたスコープ・ゴールを具体化した内容になっている  

### C-2. ユースケース／要件との対応関係（5点）
- ユースケース ID や要件 ID と、To-Be フローのステップが対応づけられている、もしくは容易に対応づけ可能である  

### C-3. 命名規則・ID付与（5点）
- ステップ ID・ノード ID・subgraph 名などが一定の命名規則に従っている  

### C-4. As-Is → To-Be のつながり（5点）
- As-Is 図・説明と To-Be 図の対応関係が分かる（どのステップが置き換わったか／統合されたか等）  

### C-5. ドキュメント内の整合性（5点）
- 同じステップやロールについて、図とテキストの間で矛盾がない  

---

## D. ガバナンス・運用・リスク（Governance & Risk）25点

### D-1. コントロールポイント・承認ステップ（5点）
- 必要な承認ステップやチェックポイントが To-Be フロー上に明示されている  

### D-2. 例外処理・エラー時の流れ（5点）
- AI 処理失敗時や入力不備時などの例外フローが設計されている  

### D-3. ログ・証跡の観点（5点）
- 重要な判断や処理結果がどこで記録されるか、運用上の証跡確保の視点が含まれている  

### D-4. 運用負荷・属人化リスク（5点）
- 特定の部署・担当者への過度な依存を避ける設計になっている  
- 運用開始後の保守・変更のしやすさが考慮されている  

### D-5. ガバナンス・コンプライアンス（5点）
- 業務規程・情報セキュリティポリシー・監査要件などへの配慮が To-Be フローに反映されている  

---

# スコアリング方法

各項目を 1〜5 点で採点し、以下の形式で返す：

- A（25点満点）
- B（25点満点）
- C（25点満点）
- D（25点満点）
- Total（合計100点）

---

# pass / fail 基準

- **90点以上：pass（To-Be 業務フローとして十分な水準）**  
- **75〜89点：条件付き pass（改善推奨）**  
- **74点以下：fail（重要な改善が必要）**

---

# 出力形式（doc-evaluator による回答フォーマット）

評価エージェントは以下の JSON 形式で回答する：

```
{
  "scores": {
    "A_diagram":      { "score": X, "details": {...} },
    "B_business":     { "score": X, "details": {...} },
    "C_traceability": { "score": X, "details": {...} },
    "D_risk":         { "score": X, "details": {...} },
    "total": X,
    "pass_fail": "pass" | "fail"
  },
  "feedback": {
    "strengths": ["..."],
    "improvements": ["..."],
    "recommendations": ["..."]
  }
}
```

---

# 評価対象ファイル

- 対象：`@docs/04_to-be_workflow/output/*.md`（To-Be 業務フロードラフト）  
- 基準：本 `evaluation.md`

---
